\documentclass{beamer}

\input{common_preamble.tex}

\title{Chapter 01 - Mobile Robot Kinematics}

\begin{document}

\begin{frame}[plain]
\titlepage
\end{frame}

\begin{frame}{Motion Planning Needs Models}
\begin{itemize}
\item Planning a trajectory and choosing control inputs both depend on understanding how the robot moves.
\item Dynamics and kinematics together capture the physical behavior needed for actionable autonomy.
\item Without a model that links objectives to actuation, even simple point-to-point tasks stall.
\end{itemize}
\end{frame}
% --- Original text start ---
% Motion planning and control are fundamental components of robotic autonomy\cite{SiegwartNourbakhshEtAl2011}. For example, in order for an autonomous car to accomplish an objective (e.g. move from point A to B) it first needs to plan a trajectory and determine what control inputs (e.g. throttle and steering) will enable it to follow the trajectory. Both of these components require an understanding of the physical behavior of the robot in order to develop reasonable/actionable plans and controls. In the context of motion planning and control, a robot's physical behavior is generally characterized by its \textit{dynamics} and \textit{kinematics}.
% --- Original text end ---

\begin{frame}{Dynamics vs Kinematics}
\begin{itemize}
\item Dynamics map applied forces to changes in the robot state (e.g., $F=ma$ realized on a car).
\item Kinematics impose motion restrictions that arise from geometry rather than forces.
\item Both perspectives are necessary to describe what a robot can actually do.
\end{itemize}
\end{frame}
% --- Original text start ---
% \begin{definition}[Dynamics]
% A robot's \textit{dynamics} describe the relationship between forces acting on the robot and changes to the robot's physical state.
% \end{definition}
% In other words, dynamics can be thought of as the result of Newton's Second Law ($F=ma$) in the context of a particular robot. For example, the dynamics of an autonomous car would describe the relationship between acceleration and forces induced by the tires, gravity, aerodynamics, and so on.
% 
% \begin{definition}[Kinematics]
% A robot's \textit{kinematics} describe additional restrictions (constraints) on the robot's motion that are \textit{not} induced by forces.
% \end{definition}
% 
% The most trivial example is that the rate of change of the robot's position must equal its velocity. More generally a robot's kinematics describe limitations on its motion that are a function of the robot's physical state or geometry. For example a robotic arm with multiple joints is kinematically constrained since the rigid connections at each joint only allow rotation about a single axis.
% --- Original text end ---

\begin{frame}{Modeling Questions}
\begin{itemize}
\item Dynamics are affected by mass changes, while kinematics are notâ€”use that heuristic to classify constraints.
\item Decide which dynamics/kinematics actually matter for the task and which can be simplified away.
\item The right model balances complexity against accuracy for the objective at hand.
\end{itemize}
\end{frame}
% --- Original text start ---
% From the preceding descriptions it should be noted that a robot's dynamics and kinematics describe limitations on its motion in different ways\sidenote[][-5\baselineskip]{One simple heuristic for determining how a particular constraint/relationship should be classified is to remember that dynamics are affected by changing the robot's mass, while kinematics are \textit{not}.}.
% Not only is it important to identify and describe a robot's dynamics and kinematics, but a roboticist should also ask:
% \begin{enumerate}
%     \item Do I need to consider \textit{all} of the dynamics/kinematics? Are they all important to the robot's task?
%     \item Can any of the dynamics/kinematics be simplified/approximated to make the motion planning and control task easier? 
% \end{enumerate}
% The combination of dynamics and kinematics make up a \textit{model} of the physical behavior of the robot, and depending on the robot's task some models may be more appropriate than others. In particular the complexity of the model often needs to be balanced with its accuracy/relevance for the task at hand. 
% --- Original text end ---

\begin{frame}{Balancing Fidelity}
\begin{itemize}
\item High-fidelity car models include engine, suspension, and tire dynamics that explain phenomena like drifting.
\item Many applications can instead enforce a kinematic no-side-slip constraint for tractability.
\item Picking the right abstraction speeds up planning without losing the essential behavior.
\end{itemize}
\end{frame}
% --- Original text start ---
% To illustrate this, consider again the autonomous car example. The most accurate model would leverage the car's dynamics, and would include engine dynamics, suspension dynamics, tire dynamics, and so on. In particular, incorporating tire dynamics is critical to understand the phenomenon of drifting, which may be important for motion planning and control in autonomous racing applications. However in other applications it may be more appropriate to simplify the model by replacing the tire \textit{dynamics} with a simple \textit{kinematic} constraint that the tires cannot move laterally (i.e. a ``no side slip'' constraint).
% --- Original text end ---

\begin{frame}{Chapter Roadmap}
\begin{itemize}
\item Express robot configurations via generalized coordinates.
\item Encode kinematic constraints with those coordinates.
\item Distinguish holonomic from nonholonomic constraints.
\item Build practical kinematic models for wheeled robots.
\end{itemize}
\end{frame}
% --- Original text start ---
% In fact, in the context of motion planning and control for robotics, models built entirely from kinematics can be very useful (and much simpler). For this reason this chapter specifically focuses on robot kinematics, and in particular:
% \begin{enumerate}
%     \item How to express the configuration of a robot in terms of \textit{general coordinates}
%     \item How to mathematically express kinematic constraints in terms of general coordinates
%     \item How to identify different types of kinematic constraints, namely \textit{holonomic} and \textit{nonholonomic} constraints
%     \item Examples of kinematic models, specifically for wheeled robots
% \end{enumerate}
% --- Original text end ---

\begin{frame}{Generalized Coordinates}
\begin{itemize}
\item A robot's configuration can be represented in many ways; any complete set defines generalized coordinates.
\item Collect the coordinates in $\bxi \in \mathbb{R}^n$ to specify the state uniquely.
\item Trajectories are mappings $\bxi(t): \mathbb{R} \to \mathbb{R}^n$ that describe motion over time.
\end{itemize}
\end{frame}
% --- Original text start ---
% A robot's physical state (also commonly referred to as its ``configuration'') can usually be represented (i.e. quantified) in different ways. The particular choice of representation defines a finite set of numbers known as \textit{generalized coordinates}.
% \begin{definition}[Generalized Coordinates]
% Generalized coordinates refer to a set of coordinates that can completely specify the unique position of your robot.
% \end{definition}
% The generalized coordinates are mathematically expressed by the vector $\bxi \in \R^n$, where $n$ is the number of generalized coordinates used to describe the robot's configuration.
% A robot's motion through time (i.e. its trajectory) is then expressed by the function
% \begin{equation*}
%     \bxi(t): \R \to \R^n,
% \end{equation*}
% where $t$ denotes time.
% --- Original text end ---

\begin{frame}{Example: Wheel Coordinates}
\begin{itemize}
\item Use $(x,y,\theta)$ to record where a wheel contacts the plane and which direction it points.
\item The generalized coordinate vector becomes $\bxi = [x\;y\;\theta]^\top$.
\item This minimal set fully captures the wheel's configuration.
\end{itemize}
\pause
\begin{center}
    \includegraphics[width=0.6\linewidth]{../book/figs/ch01_figs/wheel_roll.png}
\end{center}
\end{frame}
% --- Original text start ---
% For example, the wheel rolling on a plane in Figure \ref{fig:non slip disk} can be represented by three parameters, $x, y,\text{and } \theta$, where $(x, y)$ indicates the position at which the wheel touches the ground, and $\theta$ indicates the direction the wheel is traveling in the general frame...
% --- Original text end ---

\begin{frame}{Kinematic Constraint Definition}
\begin{itemize}
\item Kinematic constraints relate coordinates and velocities to limit motion.
\item For $k$ constraints, write $a_i(\bxi, \dot{\bxi}) = 0$ for $i=1,\dots,k<n$.
\item These expressions encode contacts or linkages without referencing forces.
\end{itemize}
\pause
\[
 a_i(\bxi, \dot{\bxi}) = 0
\]
\end{frame}
% --- Original text start ---
% Let the generalized coordinates of a robot be denoted as $\bxi =[\xi_1, \dots, \xi_n]^\top  $. Constraints that depend on these generalized coordinates and their velocities are called kinematic constraints and are expressed as $a_i(\bxi, \dot{\bxi}) = 0$.
% --- Original text end ---

\begin{frame}{Pfaffian Constraints}
\begin{itemize}
\item Many robotic constraints are linear in $\dot{\bxi}$, yielding Pfaffian form $a_i^\top(\bxi)\dot{\bxi}=0$.
\item Stack the constraints as $A^\top(\bxi)\dot{\bxi}=\mathbf{0}$ for compact notation.
\item Each column of $A(\bxi)$ captures how a constraint depends on configuration.
\end{itemize}
\pause
\[
A^\top(\bxi)\dot{\bxi} = \mathbf{0}
\]
\end{frame}
% --- Original text start ---
% Kinematic constraints in robotics applications are often linear with respect to the generalized velocities... expressed as Pfaffian constraints $a_i^\top(\bxi)\dot{\bxi}=0$ or $A^\top(\bxi)\dot{\bxi}=\mathbf{0}$.
% --- Original text end ---

\begin{frame}{Example: Pendulum Constraint}
\begin{itemize}
\item A rigid pendulum with Cartesian coordinates $(x,y)$ satisfies $x^2 + y^2 = L^2$.
\item Differentiating yields the Pfaffian form $2x\dot{x} + 2y\dot{y} = 0$.
\item Using the single coordinate $\theta$ automatically enforces the circle constraint.
\end{itemize}
\pause
\begin{center}
    \includegraphics[width=0.4\linewidth]{../book/figs/ch01_figs/pendulum.png}
\end{center}
\end{frame}
% --- Original text start ---
% Figure \ref{fig:pendulum} shows a simple pendulum ... $a_1(\bxi) = x^2 + y^2 - L^2 = 0$ and differentiating gives $2x\dot{x} + 2y\dot{y} = 0$. Using $\theta$ removes the constraint.
% --- Original text end ---

\begin{frame}{Example: No-Slip Wheel}
\begin{itemize}
\item A rolling wheel with coordinates $[x,y,\theta]^\top$ maintains zero lateral velocity.
\item Using basis vectors aligned with the wheel gives the constraint $\dot{x}\sin\theta - \dot{y}\cos\theta = 0$.
\item The Pfaffian form keeps the constraint linear in $\dot{x}$ and $\dot{y}$.
\end{itemize}
\pause
\[
\dot{x}\sin\theta - \dot{y}\cos\theta = 0
\]
\end{frame}
% --- Original text start ---
% The no-slip condition means the velocity component in the lateral direction is zero, leading to $\dot{x} \sin\theta - \dot{y} \cos \theta = 0$.
% --- Original text end ---

\begin{frame}{Holonomic Constraints}
\begin{itemize}
\item Holonomic constraints depend only on configuration: $h_i(\bxi)=0$.
\item Differentiating $h_i$ reproduces the equivalent Pfaffian form.
\item Holonomic systems contain only such integrable constraints.
\end{itemize}
\pause
\[
\frac{dh_i(\bxi)}{dt} = \frac{dh_i(\bxi)}{d\bxi}\dot{\bxi} = 0
\]
\end{frame}
% --- Original text start ---
% Holonomic constraints ... can be expressed as $h_i(\bxi)=0$ and differentiating yields the Pfaffian form.
% --- Original text end ---

\begin{frame}{Holonomic Access}
\begin{itemize}
\item Holonomic constraints restrict the reachable configurations to an $(n-k)$-dimensional subset.
\item A pendulum mass remains on a circle of radius $L$, reducing the space to one dimension.
\item The no-slip wheel constraint is not integrable, so it does not limit which $(x,y)$ can be reached.
\end{itemize}
\end{frame}
% --- Original text start ---
% Holonomic constraints restrict the accessible configurations ... pendulum example vs wheel example.
% --- Original text end ---

\begin{frame}{Nonholonomic Constraints}
\begin{itemize}
\item Nonholonomic constraints are Pfaffian but cannot be integrated to $h_i(\bxi)=0$.
\item They restrict allowable motions between configurations rather than the configurations themselves.
\item Any system subject to at least one such constraint is nonholonomic.
\end{itemize}
\end{frame}
% --- Original text start ---
% Constraints that can be described in Pfaffian form, but cannot be integrated to $h_i(\bxi) = 0$ are called nonholonomic.
% --- Original text end ---

\begin{frame}{Reminder: Null Space}
\begingroup
\setbeamercolor{block title}{bg=gray!20,fg=black}
\setbeamercolor{block body}{bg=gray!10,fg=black}
\begin{block}{Concept Recap}
\begin{itemize}
\item The null space of a matrix $A$ is the set of all vectors $\mathbf{x}$ such that $A\mathbf{x} = \mathbf{0}$, where $\mathbf{0}$ denotes the zero vector.
\item Emphasizing the zero vector clarifies that every component of $A\mathbf{x}$ must vanish simultaneously.
\item Example: For $A = \begin{bmatrix} 1 & 2\\ 3 & 6 \end{bmatrix}$, any scalar multiple of $\begin{bmatrix} 2\\ -1 \end{bmatrix}$ lies in the null space because $A\begin{bmatrix} 2\\ -1 \end{bmatrix} = \mathbf{0}$.
\end{itemize}
\end{block}
\endgroup
\end{frame}
% --- Original text start ---
% The restriction of instantaneous motion that is induced by a nonholonomic constraint can be interpreted by considering the Pfaffian form $a_i(\bxi)^\top \dot{\bxi} = 0$. It is clear that for any coordinate $\bxi$, this constraint limits the motion ($\dot{\bxi}$) to lie in the null space of $a_i(\bxi)^\top $.
% --- Original text end ---

\begin{frame}{Instantaneous Motion Limits}
\begin{itemize}
\item Nonholonomic constraints confine $\dot{\bxi}$ to the null space of $a_i^\top(\bxi)$.
\item For the wheel, the null space is spanned by the rolling direction and pure spin.
\item Any feasible velocity is a combination of those motions.
\end{itemize}
\end{frame}
% --- Original text start ---
% Consider again the wheel example ... The null space of $a_i(\bxi)^\top$ is spanned by $[\cos \theta, \: \sin \theta,\: 0]$ and $[0, \: 0,\: 1]$, indicating admissible motions combine rolling and spinning.
% --- Original text end ---

\begin{frame}{Building Kinematic Models}
\begin{itemize}
\item After identifying constraints, express motion as $\dot{\bxi} = G(\bxi)\bu$.
\item Columns of $G(\bxi)$ span the null space of $A^\top(\bxi)$, guaranteeing constraint satisfaction.
\item Inputs $\bu$ parameterize allowable motions of dimension $n-k$.
\end{itemize}
\end{frame}
% --- Original text start ---
% Once an appropriate set of generalized coordinates $\bxi \in \R^n$ and all relevant kinematic constraints have been identified ... $\dot{\bxi} = G(\bxi)u$ with column space spanning the null space of $A^\top(\bxi)$.
% --- Original text end ---

\begin{frame}{Example: Wheel Kinematic Model}
\begin{itemize}
\item The wheel's constraint matrix has a one-dimensional row space, so $G(\bxi)$ has two columns.
\item Choose columns $[\cos\theta\;\sin\theta\;0]^\top$ (rolling) and $[0\;0\;1]^\top$ (spin).
\item Inputs $u_1$ and $u_2$ become forward speed and rotational rate, respectively.
\end{itemize}
\pause
\[
\begin{bmatrix}
\dot{x}\\\dot{y}\\\dot{\theta}
\end{bmatrix} =
\begin{bmatrix}
\cos\theta & 0\\
\sin\theta & 0\\
0 & 1
\end{bmatrix}
\begin{bmatrix}
 u_1\\ u_2
\end{bmatrix}
\]
\end{frame}
% --- Original text start ---
% Consider again the wheel example ... The null space is spanned by $[\cos \theta, \: \sin \theta,\: 0]$ and $[0, \: 0,\: 1]$, giving the model in \eqref{eq:wheelkinmodel}.
% --- Original text end ---

\begin{frame}{Why Wheeled Models}
\begin{itemize}
\item Wheeled robots are common thanks to mobility and mechanical simplicity.
\item Standard templates (unicycle, differential drive, etc.) cover many platforms.
\item Studying canonical cases makes it easier to adapt kinematic reasoning to new robots.
\end{itemize}
\end{frame}
% --- Original text start ---
% Robots come in all shapes, sizes, and configurations ... wheeled robots are perhaps the most widely used because of their high mobility and simple design.
% --- Original text end ---

\begin{frame}{Unicycle Model}
\begin{itemize}
\item Approximates the robot as a single wheel with state $[x,y,\theta]^\top$.
\item Shares the same no-slip constraint as the earlier wheel example.
\item Inputs $(v,\omega)$ command forward speed and body rotation.
\end{itemize}
\pause
\[
\begin{bmatrix}
\dot{x}\\\dot{y}\\\dot{\theta}
\end{bmatrix} =
\begin{bmatrix}
\cos\theta & 0\\
\sin\theta & 0\\
0 & 1
\end{bmatrix}
\begin{bmatrix}
 v\\ \omega
\end{bmatrix}
\]
\pause
\begin{center}
    \includegraphics[width=0.4\linewidth]{../book/figs/ch01_figs/unicycle.png}
\end{center}
\end{frame}
% --- Original text start ---
% The unicycle model ... assumes the robot can be approximated by a single wheel and uses inputs $v$ and $\omega$.
% --- Original text end ---

\begin{frame}{Differential Drive Geometry}
\begin{itemize}
\item Two rear wheels share an axle of width $L$; a passive front wheel carries no constraints.
\item Positions of the left and right wheels offset the body frame by $\pm \tfrac{L}{2}$.
\item Both wheels obey the same no-slip condition because they are rigidly linked.
\end{itemize}
\pause
\begin{center}
    \includegraphics[width=0.45\linewidth]{../book/figs/ch01_figs/diff_drive.png}
\end{center}
\end{frame}
% --- Original text start ---
% The differential drive model ... two wheels fixed on a rear shared axle with width $L$ (Figure \ref{fig:dd}).
% --- Original text end ---

\begin{frame}{Differential Drive Constraints}
\begin{itemize}
\item Wheel positions: $p_l = [x-\tfrac{L}{2}\sin\theta,\, y+\tfrac{L}{2}\cos\theta]$ and $p_r = [x+\tfrac{L}{2}\sin\theta,\, y-\tfrac{L}{2}\cos\theta]$.
\item Differentiating gives $\dot{p}_l$ and $\dot{p}_r$; both lead to $\dot{x}\sin\theta - \dot{y}\cos\theta = 0$.
\item The redundant constraints confirm that a single nonholonomic condition governs the chassis.
\end{itemize}
\end{frame}
% --- Original text start ---
% $p_l = [x - \frac{L}{2}\sin \theta, \: y + \frac{L}{2}\cos \theta]$, $p_r = [x + \frac{L}{2}\sin \theta, \: y - \frac{L}{2}\cos \theta]$ ... both yield $\dot{x}\sin \theta - \dot{y} \cos \theta = 0$.
% --- Original text end ---

\begin{frame}{Differential Drive Inputs}
\begin{itemize}
\item Use wheel rotation rates $(\omega_l,\omega_r)$ instead of $(v,\omega)$ for more realistic actuation.
\item Speed satisfies $v = \tfrac{r}{2}(\omega_l + \omega_r)$, while rotation obeys $\omega = \tfrac{r}{L}(\omega_r - \omega_l)$.
\item The resulting model maps wheel rates to body motion via
\pause
\[
\begin{bmatrix}
\dot{x}\\\dot{y}\\\dot{\theta}
\end{bmatrix} =
\begin{bmatrix}
\tfrac{r}{2}\cos\theta & \tfrac{r}{2}\cos\theta\\
\tfrac{r}{2}\sin\theta & \tfrac{r}{2}\sin\theta\\
\tfrac{r}{L} & -\tfrac{r}{L}
\end{bmatrix}
\begin{bmatrix}
\omega_r\\\omega_l
\end{bmatrix}.
\]
\end{itemize}
\end{frame}
% --- Original text start ---
% Relationships $v = \frac{r}{2}(\omega_l + \omega_r)$ and $\omega = \frac{r}{L}(\omega_r - \omega_l)$ lead to the differential drive model \eqref{eq:dd}.
% --- Original text end ---

\begin{frame}{Why Add Dynamics}
\begin{itemize}
\item Purely kinematic models ignore actuator limits, slip, and inertia.
\item Inputs like velocity or wheel rate may be hard to command without considering required forces.
\item Some tasks therefore augment kinematics with lightweight dynamics.
\end{itemize}
\end{frame}
% --- Original text start ---
% Mobile robot kinematic models are approximations of the true system behavior ... the choice of inputs ignores other important dynamics of the robot.
% --- Original text end ---

\begin{frame}{Extending the Unicycle}
\begin{itemize}
\item Replace velocity inputs with accelerations by adding integrator states.
\item Linear acceleration $a$ drives $\dot{v}$, and angular acceleration $\alpha$ drives $\dot{\omega}$.
\item The extended model couples kinematics with simple dynamics:
\pause
\[
\begin{bmatrix}
\dot{x}\\\dot{y}\\\dot{v}\\\dot{\theta}\\\dot{\omega}
\end{bmatrix} =
\begin{bmatrix}
 v\cos\theta\\ v\sin\theta\\ a\\ \omega\\ \alpha
\end{bmatrix}.
\]
\end{itemize}
\end{frame}
% --- Original text start ---
% One common extension to kinematic models ... replace velocity input $v$ with acceleration $a$ and add integrators, yielding \eqref{eq:extendeduni}.
% --- Original text end ---

\begin{frame}{Modeling Takeaways}
\begin{itemize}
\item Choose the simplest model that captures the geometry, actuation, and performance needs of the task.
\item Add dynamics when necessary, but leverage kinematic structure to keep planning manageable.
\item Revisit models as tasks evolve to ensure accuracy remains aligned with objectives.
\end{itemize}
\end{frame}
% --- Original text start ---
% In summary, factors to consider when deciding whether a certain kinematic model is sufficient, or if additional kinematics/dynamics are needed, include the robot's configuration/geometry and the task at hand.
% --- Original text end ---

\end{document}
